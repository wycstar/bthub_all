<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>{{ keyword }}的搜索结果 - BTHUB</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href={{url_for('static', filename="css/public.css")}}>
    <link rel="stylesheet" type="text/css" href={{url_for('static', filename="css/footer.css")}}>
    <link rel="stylesheet" type="text/css" href={{url_for('static', filename="css/result.css")}}>
    <link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
</head>
<body style="height: 100%">
    <section id="top"></section>
    <div id="header">
        <div id="logo-wrapper">
            <a href="http://{{ domain }}" target="_blank"><img src={{url_for('static', filename="img/logo_white.png")}}/></a>
        </div>
        <div id="search">
            <form method="POST">
                {{ query_form.hidden_tag() }}
                <fieldset id="search-container">
                    <div id="search-input" class="search-input-skin hover-animation">
                        {{ query_form.keyword(id="input", autocomplete="off") }}
                    </div>
                    {{ query_form.submit(class="search-button-skin hover-animation", id="search-button") }}
                </fieldset>
            </form>
        </div>
    </div>
    <div id="type-selection">
        <a href={{ ['/s/', keyword, '/', current_page]|join('') }}
        {% if sort_type == None %}
            class="type-selection-selected"
        {% endif %}>
            相关度
        </a>
        <a href={{ ['/s/', keyword, '/', current_page, '?sort=heat']|join('') }}
        {% if sort_type ==  "heat" %}
            class="type-selection-selected"
        {% endif %}>
            流行度
        </a>
        <a href={{ ['/s/', keyword, '/', current_page, '?sort=ctime']|join('') }}
        {% if sort_type ==  "ctime" %}
            class="type-selection-selected"
        {% endif %}>
            创建时间
        </a>
        <a href={{ ['/s/', keyword, '/', current_page, '?sort=atime']|join('') }}
        {% if sort_type ==  "atime" %}
            class="type-selection-selected"
        {% endif %}>
            最近下载
        </a>
        <a href={{ ['/s/', keyword, '/', current_page, '?sort=size']|join('') }}
        {% if sort_type ==  "size" %}
            class="type-selection-selected"
        {% endif %}>
            文件大小
        </a>
        <a href={{ ['/s/', keyword, '/', current_page, '?sort=file']|join('') }}
        {% if sort_type ==  "file" %}
            class="type-selection-selected"
        {% endif %}>
            文件数量
        </a>
    </div>
    <div id="wrap">
        <div id="content" class="clearfix">
            <div id="left-content" class="fl">
                <div class="num">
                    为您找到<strong>{{ keyword }}</strong>相关的结果<strong>{{ result_num }}</strong>个，用时<strong>{{ result_time }}s</strong>
                </div>
                <div id="result">
                    {% for x in results %}
                    <div class="item">
                        <h2>
                            {% autoescape false %}
                            <a href={{ x['url'] }} target="_blank">{{x['name']}}</a>
                            {% endautoescape %}
                        </h2>
                        <ul>
                            {% for y in x['files'] %}
                            <li class="clearfix">
                                <span class="fl">{{ y['n'] }}</span>
                                <span class="fr">{{ y['l'] }}</span>
                            </li>
                            {% endfor %}
                            {% if x['num'] > 10 %}
                            <li style="font-size: 22px">...</li>
                            {% endif %}
                        </ul>
                        <p>
                            文件数量：<span>{{ x['num'] }}</span>
                            文件大小：<span>{{ x['size'] }}</span>
                            热度：<span>7</span>
                            收录时间：<span>{{ x['ctime'] }}</span>
                            <span class="icon-hidden">
                                <i class="fa fa-magnet" aria-hidden="true"></i>
                                <a href={{ x['mag'] }}>复制链接</a>
                            </span>
                        </p>
                    </div>
                    {% endfor %}
                </div>
                <div id="page"
                {% if result_num ==  0 %}
                    style="visibility:hidden"
                {% endif %}>
                {% if current_page == 1 %}
                <a class="next-page" style="visibility:hidden" href="#">
                    <i class="fa fa-arrow-left" aria-hidden="true"></i>
                </a>
                {% else %}
                <a class="next-page" href={{ ['/s/', keyword, '/', current_page - 1]|join('') }}>
                    <i class="fa fa-arrow-left" aria-hidden="true"></i>
                </a>
                {% endif %}
                {% set total_page = (result_num / 10) | round(0, 'ceil') | int %}
                {% if total_page > 7 %}
                {% endif %}
{#                <a class="other-page" href={{ ['/s/', keyword, '/', 1]|join('') }}>1</a>#}


{#                {% if current_page >= 5 and current_page <= total_page - 5 %}#}
{#                    {% for page in range(7) %}#}
{#                        {% if page == 0 or page == 6 %}#}
{#                            <a class="other-page">...</a>#}
{#                        {% elif page == 3 %}#}
{#                            <a class="current-page" href={{ ['/s/', keyword, '/', current_page]|join('') }}>{{ current_page }}</a>#}
{#                        {% else %}#}
{#                            <a class="other-page" href={{ ['/s/', keyword, '/', current_page + page - 3]|join('') }}>{{ current_page + page - 3 }}</a>#}
{#                        {% endif %}#}
{#                    {% endfor %}#}
{#                {% endif %}#}
{#                {% if current_page < 5 %}#}
{#                    #}
{#                {% endif %}#}


                {% if current_page >= 5 %}
                    <a class="other-page" href={{ ['/s/', keyword, '/', 1]|join('') }}>1</a>
                    <a class="other-page">...</a>
                    <a class="other-page" href={{ ['/s/', keyword, '/', current_page - 2]|join('') }}>{{ current_page - 2 }}</a>
                    <a class="other-page" href={{ ['/s/', keyword, '/', current_page - 1]|join('') }}>{{ current_page - 1 }}</a>
                {% else %}
                    {% for x in range(1, current_page) %}
                        <a class="other-page" href={{ ['/s/', keyword, '/', x]|join('') }}>{{ x }}</a>
                    {% endfor %}
                {% endif %}
                <a class="current-page" href={{ ['/s/', keyword, '/', current_page]|join('') }}>{{ current_page }}</a>
                <a class="other-page" href={{ ['/s/', keyword, '/', total_page]|join('') }}>{{ total_page }}</a>

{#                    {% for page in range((result_num / 10) | int + 1) %}#}
{#                        {% if current_page >= 7 %}#}
{#                        {% if page == 5 %}#}
{#                        <a class="current-page" href={{ ['/s/', keyword, '/', current_page + page - 5]|join('') }}>{{ current_page + page - 5 }}</a>#}
{#                        {% else %}#}
{#                        <a class="other-page" href={{ ['/s/', keyword, '/', current_page + page - 5]|join('') }}>{{ current_page + page - 5}}</a>#}
{#                        {% endif %}#}
{#                        {% else %}#}
{#                        {% if page + 1 == current_page %}#}
{#                        <a class="current-page" href={{ ['/s/', keyword, '/', page + 1]|join('') }}>{{ page + 1 }}</a>#}
{#                        {% else %}#}
{#                        <a class="other-page" href={{ ['/s/', keyword, '/', page + 1]|join('') }}>{{ page + 1 }}</a>#}
{#                        {% endif %}#}
{#                        {% endif %}#}
{#                    {% endfor %}#}
                    <a class="next-page" href={{ ['/s/', keyword, '/', current_page + 1]|join('') }}>
                        <i class="fa fa-arrow-right" aria-hidden="true"></i>
                    </a>
                </div>
            </div>
            <div id="right-content" class="fr">
                <div id="hot-search">
                    <h3>大家都在搜</h3>
                    <ul>
                        <li class="clearfix">
                            <a class="hot-keyword">coat ryo</a>
                            <span><i class="fa fa-clock-o" aria-hidden="true"></i>18 分钟前</span>
                        </li>
                        <li class="clearfix">
                            <a class="hot-keyword">keyword1</a>
                            <span><i class="fa fa-clock-o" aria-hidden="true"></i>18 分钟前</span>
                        </li>
                        <li class="clearfix">
                            <a class="hot-keyword">keyword1</a>
                            <span><i class="fa fa-clock-o" aria-hidden="true"></i>18 分钟前</span>
                        </li>
                        <li class="clearfix">
                            <a class="hot-keyword">keyword1</a>
                            <span><i class="fa fa-clock-o" aria-hidden="true"></i>18 分钟前</span>
                        </li>
                        <li class="clearfix">
                            <a class="hot-keyword">keyword1</a>
                            <span><i class="fa fa-clock-o" aria-hidden="true"></i>18 分钟前</span>
                        </li>
                        <li class="clearfix">
                            <a class="hot-keyword">肖申克的救赎</a>
                            <span><i class="fa fa-clock-o" aria-hidden="true"></i>18 分钟前</span>
                        </li>
                        <li class="clearfix">
                            <a class="hot-keyword">肖申克的救赎</a>
                            <span><i class="fa fa-clock-o" aria-hidden="true"></i>18 分钟前</span>
                        </li>
                        <li class="clearfix">
                            <a class="hot-keyword">肖申克的救赎</a>
                            <span><i class="fa fa-clock-o" aria-hidden="true"></i>18 分钟前</span>
                        </li>
                        <li class="clearfix">
                            <a class="hot-keyword">肖申克的救赎</a>
                            <span><i class="fa fa-clock-o" aria-hidden="true"></i>18 分钟前</span>
                        </li>
                        <li class="clearfix">
                            <a class="hot-keyword">肖申克的救赎</a>
                            <span><i class="fa fa-clock-o" aria-hidden="true"></i>18 分钟前</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="foot">
            <div class="footer-container">
                <div class="clearfix">
                    <div class="rights fl">Copyright © 2016 <strong>BTHUB.ME</strong>. All rights reserved.</div>
                    <div class="privacy fr">
                        <a>隐私</a>
                        <a>版权</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom"></div>
        </div>
    </div>
    <script type="text/javascript">
        $(function () {
            var page = $("#page");
            var item = $(".item");
            item.mouseover(function () {
                $(this).addClass("item-hover");
                $(this).children("p").children("span:last").addClass("icon-show")
            });
            item.mouseleave(function () {
                $(this).removeClass("item-hover");
                $(".icon-show").removeClass("icon-show")
            });
        })

    </script>
</body>
</html>